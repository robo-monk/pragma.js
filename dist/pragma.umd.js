!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).pragma={})}(this,(function(e){"use strict";function t(e,t=null,n=["rerun the code 10 times"],i=null,r=!1){if(!p&&!r)return null;console.error(`%c ðŸ§¯ pragma.js  %c \n\n      encountered a soft error ðŸ”« %c \n\n      \n${i?`Triggered by: [${i.key} ${i}]`:""}\n      \n${e} %c\n\n      \n${null!=t?`Potential ${t}: \n\t${n.join("\n\t")}`:""}\n      `,"font-size:15px","font-size: 12px;","color:whitesmoke","color:white")}function n(){console.log("%c ðŸŒ´ [pragma] \n\n      ","font-size:12px; color:#86D787;",...arguments,"\n")}const i=e=>e.replace(/[^a-z0-9]/gi,"-").toLowerCase();function r(e){if("complete"===document.readyState)return e();window.pragma.listeningToTurbolinks||(window.pragma.listeningToTurbolinks=!0,document.addEventListener("turbolinks:load",(()=>(n("ðŸš€ TURBOLINKS loaded"),e())))),document.onreadystatechange=()=>r(e)}window.pragma||(window.pragma={});var s=/[#.]/g;function o(e,t="div"){var n=e||"",i={},r=0;let o,l,a;for(;r<n.length;)s.lastIndex=r,a=s.exec(n),o=n.slice(r,a?a.index:n.length),o&&(l?"#"===l?i.id=o:i.class?i.class.push(o):i.class=[o]:i.tag=o,r+=o.length),a&&(l=a[0],r++);return i}function l(e,n){if(!Array.isArray(e))return t(`Could not add class [${e}] to [${n}]`);for(let t of e){let e=t.split(" ");e.length>1?l(e,n):n.classList.add(t)}}function a(e){let t=document.querySelector(e);if(t)return t;let n=o(e),i=document.createElement(n.tag||"div");return n.id&&(i.id=n.id),n.class&&l(n.class,i),i}function c(e){return e instanceof HTMLElement?e:"string"==typeof e?a(e):t(`Could not find/create element from [${e}]`)}function h(){return btoa(Math.random()).substr(10,5)}function d(e,t,n=!1){for(let[n,i]of Object.entries(t))e[n]=i;return e}String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};const u={html:(e,t)=>{t.innerHTML=e},pcss:(e,t)=>{for(let[i,r]of f.cssToDict(e))t.style[(n=i,n.replace(/([-_]\w)/g,(e=>e[1].toUpperCase())))]=r;var n}},f={cssToDict:e=>{e=e.replaceAll("\n",";").replaceAll(":"," ");let n=new Map;for(let t of e.split(";")){if(t.replace(/\s/g,"").length<2)continue;t=t.trim().split(" ");let e=t[0];t.shift(),n.set(e.trim(),t.join(" ").trim())}let i=[];for(const[e,t]of n.entries())CSS.supports(e,t)||i.push(`${e.trim()}: ${t.trim()}`);return i.length>0&&t("CSS syntax error","typos",i),n},css:e=>{let t="";for(let[n,i]of f.cssToDict(e))t+=`${n}:${i};`;return t},html:e=>e},p="development"===process.env.NODE_ENV;var m=Object.freeze({__proto__:null,_deving:p,throwSoft:t,log:function(){if(!p&&!force)return null;console.log(...arguments)},suc:n,whenDOM:r,parseQuery:o,addClassAryTo:l,selectOrCreateDOM:a,elementFrom:c,toHTMLAttr:i,generateRandomKey:h,objDiff:d,_extend:function(e,t){Object.setPrototypeOf(e,d(Object.getPrototypeOf(e),t))},parse:f,apply:u});class y{constructor(){this.actions=new Map}addWithKey(e,t=null){t=t||this.actions.size,this.actions.set(t,e)}add(...e){for(let t of e)this.addWithKey(t)}forAction(e){for(let[t,n]of this.actions)e(t,n)}exec(...e){this.forAction((function(t,n){n(...e)}))}execAs(e,...t){this.forAction((function(n,i){i.bind(e)(...t)}))}}function g(e){if(null==e||null==e)return t(`Could not find a DOM element for ${e}`);if(e.element)return g(e.element);return c(e)}function w(e,t){let n=`${e}Chain`,i=`on${e.capitalize()}`,r=`is${e.capitalize()}ed`;t[n]=new y,t[n].add((()=>{t[r]=!0})),t[i]=function(e){if(t[r])return e(t);t[n].add(e)}}function C(e,t){let n=c(e);return n instanceof HTMLElement&&(n.init(),n._render()),"string"==typeof t&&n.html(t),n}const b={init:function(){this.isPragmaElement=!0,this.eventChains("docLoad","render"),r((()=>this.docLoadChain.exec(this)))},eventChains:function(...e){for(let t of e)w(t,this)},_render:function(){this.renderChain.exec(this)},appendTo:function(e){return this.onDocLoad((()=>{g(e).appendChild(this),this._render()})),this},append:function(e){return this.onRender((()=>{let t=g(e);this.appendChild(t)})),this},css:function(e){return this.onRender((()=>{u.pcss(e,this)})),this},html:function(e){return this.onRender((()=>{u.html(e,this)})),this},setId:function(e){return this.id=e,this},addClass:function(...e){return l(e,this),this},listenTo:function(...e){return this.onRender((()=>{this.addEventListener(...e)})),this}};for(let[e,t]of Object.entries(b))HTMLElement.prototype[e]=t;const M={parent:(e,t)=>{e.parent=t},value:(e,t)=>{e.value=t},id:(e,t)=>{e.id=t},class:(e,t)=>{e._class=t},element:(e,t)=>{e.element=C(t)},children:(e,t)=>{if(t.constructor==Array)return e.buildAry(t);e.build(t)},childTemplate:(e,t)=>{}};class T extends class{constructor(e){this.childMap=new Map,this.key=e||h(),this.containsKey=this.childMap.has}get kidsum(){return this.childMap.size}get hasKids(){return this.kidsum>0}get shape(){return this.shapePrefix()}get master(){return null==this.parent||null==this.parent.parent?this.parent:this.parent.master}get children(){return Array.from(this.childMap.values())}get depthKey(){return this.parent?this.parent.depthKey+"<~<"+this.key:this.key}get allChildren(){if(!this.hasKids)return null;let e=this.children;for(let t of e){let n=t.allChildren;n&&(e=e.concat(n))}return e}find(e){if(this.childMap.has(e))return this.childMap.get(e);for(let[t,n]of this.childMap){let t=n.find(e);if(t)return t}}add(e){if(this.childMap.has(e.key))return e.key=e.key+"~",this.add(e);e.parent=this,this.childMap.set(e.key,e)}shapePrefix(e=""){let t=`${e}| ${this.type} - ${this.key} \n`;if(this.hasKids){e+="| ";for(let n of this.children)t+=n.shapePrefix(e)}return t}}{constructor(e,t){super(),this.actionChain=new y,"object"==typeof e?function(e,t){let n=new Map;for(let[i,r]of Object.entries(e))M.hasOwnProperty(i)?M[i](t,r):n.set(i,r);t.element&&t.element.whenInDOM((e=>{for(let[i,r]of n)if(i=i.toLowerCase(),i.includes("on")){let n=i.split("on")[1].trim();e.listenTo(n,(()=>{t.action(r)}))}}))}(e,this):this.key=e,this.key=this.key||h(),this.element=this.element||C(`#${this.id}`)}set value(e){this.v=e,this.exec()}get value(){return this.v}exec(){return this.actionChain.execAs(this,...arguments),this}set id(e){this.key=e,this.element&&(this.element.id=this.id)}get id(){return i(this.key)}buildAry(e){for(let t of e)this.add(new T(t,this));return this}build(...e){return this.buildAry(e)}listenTo(...e){return this.element.listenTo(...e)}do(){return this.actionChain.add(...arguments),this}contain(...e){for(let t of e)super.add(t),t.isRendered?throwSoft(`[${t}] is already appended`):this.element.append(t)}}const $=["listenTo","html","css","addClass","setId"];for(let e of $)T.prototype[e]=function(){return this.element[e](...arguments),this};const x=(e,t)=>{let n=new T;return n.element=C(e,t),n.id=n.element.id,n},v=x;e.Pragma=T,e._e=C,e._p=v,e.util=m,e.Ï€=x,Object.defineProperty(e,"__esModule",{value:!0})}));
